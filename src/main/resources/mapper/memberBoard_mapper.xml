<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bigmoim.module.memberboard.repository.MemberBoardRepository">

    <sql id="memberBoard_fullColumn">
        mbNum,
        mbTitle,
        mbContent,
        mbDate,
        memberId,
        mbImg,
        moimNum,
        boardType
    </sql>

    <select id="boardList" resultType="com.bigmoim.module.memberboard.entity.MemberBoardEntity">
        SELECT <include refid="memberBoard_fullColumn"/>
        FROM `memberBoard`
        WHERE moimNum = #{moimNum}
    </select>

    <insert id="boardInsert" >
        INSERT INTO `memberBoard` (
            mbTitle,
            mbContent,
            mbDate,
            memberId,
            mbImg,
            moimNum
        )
        VALUES (

                   #{mbTitle},
                   #{mbContent},
                   NOW(),
                   #{memberId},
                   #{mbImg},
                   #{moimNum}
               )
    </insert>

    <delete id="boardDelete" >
        DELETE
        FROM `memberBoard`
        WHERE mbNum = #{mbNum}
    </delete>

    <update id="boardUpdate" >
        UPDATE `memberBoard`
        SET mbTitle = #{mbTitle},
            mbContent = #{mbContent},
            mbDate = NOW(),
            mbImg = #{mbImg}
        WHERE mbNum = #{mbNum}
    </update>

    <select id="findByMemberId">
        select <include refid="memberBoard_fullColumn"/>
        from memberBoard
        where mbNum = #{mbNum}
    </select>
</mapper>